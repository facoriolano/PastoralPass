<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
    <title>PastoralPass - Cloud</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1e3a8a">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Babel (para rodar React direto no navegador) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Import Map (Bibliotecas) -->
    <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@18.2.0",
    "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
    "firebase/app": "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js",
    "firebase/firestore": "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js",
    "recharts": "https://esm.sh/recharts@2.12.0",
    "lucide-react": "https://esm.sh/lucide-react@0.344.0",
    "@google/genai": "https://esm.sh/@google/genai@0.1.1",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/"
  }
}
</script>
    
    <style>
      body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; -webkit-tap-highlight-color: transparent; }
      @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
      .animate-in { animation: fadeIn 0.4s ease-out; }
      /* Custom Scrollbar */
      ::-webkit-scrollbar { width: 6px; height: 6px; }
      ::-webkit-scrollbar-track { background: transparent; }
      ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
      .glass { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <!-- Lógica do App -->
    <script type="text/babel" data-type="module">
      import React, { useState, useEffect, useMemo } from 'react';
      import ReactDOM from 'react-dom/client';
      import { initializeApp } from 'firebase/app';
      import { 
        getFirestore, collection, addDoc, deleteDoc, doc, 
        query, where, onSnapshot, orderBy, serverTimestamp 
      } from 'firebase/firestore';
      import { GoogleGenAI } from "@google/genai";
      import { 
        Home, Users, ClipboardList, PieChart, Github, Scan, X, 
        CheckCircle, AlertTriangle, Plus, Trash2, Search, QrCode,
        UserCheck, UserX, Calendar, Sparkles, ScanLine, Download, 
        Check, X as XIcon, Settings, Database, Key
      } from 'lucide-react';
      import { 
        BarChart, Bar, XAxis, YAxis, Tooltip, ResponsiveContainer, CartesianGrid 
      } from 'recharts';

      // --- CONFIG & UTILS ---
      
      const CONFIG_KEY = 'pastoral_config_v2';

      const PastoralType = {
        CATEQUESE: "Catequese Infantil",
        CRISMA: "Crisma",
        EUCARISTIA: "Eucaristia",
        JOVENS: "Grupo de Jovens",
        OUTROS: "Outros"
      };

      // --- COMPONENT: SETUP SCREEN ---
      
      const SetupScreen = ({ onSave }) => {
        const [apiKey, setApiKey] = useState('');
        const [fbConfig, setFbConfig] = useState('');
        
        const handleSave = () => {
          try {
            // Tenta validar o JSON
            const parsed = JSON.parse(fbConfig);
            localStorage.setItem(CONFIG_KEY, JSON.stringify({
              geminiKey: apiKey,
              firebase: parsed
            }));
            window.location.reload(); // Recarrega para aplicar
          } catch (e) {
            alert("O JSON do Firebase parece inválido. Verifique se copiou apenas o objeto entre { }.");
          }
        };

        return (
          <div className="min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-blue-900 to-slate-900">
            <div className="bg-white rounded-2xl p-8 max-w-lg w-full shadow-2xl animate-in">
              <div className="flex items-center gap-3 mb-6 border-b pb-4">
                <div className="p-3 bg-blue-100 rounded-lg text-blue-700"><Database size={24}/></div>
                <div>
                  <h1 className="text-2xl font-bold text-gray-800">Configuração Inicial</h1>
                  <p className="text-gray-500 text-sm">Conecte seu Banco de Dados</p>
                </div>
              </div>
              
              <div className="space-y-4">
                <div>
                  <label className="block text-sm font-semibold text-gray-700 mb-1 flex items-center gap-2">
                    <Database size={14}/> Configuração Firebase (JSON)
                  </label>
                  <textarea 
                    value={fbConfig}
                    onChange={e => setFbConfig(e.target.value)}
                    placeholder='Cole aqui o objeto: { "apiKey": "...", "authDomain": "..." }'
                    className="w-full h-32 p-3 border rounded-lg text-xs font-mono bg-gray-50 focus:ring-2 focus:ring-blue-500 outline-none resize-none"
                  ></textarea>
                  <p className="text-xs text-gray-400 mt-1">Console Firebase > Configurações do Projeto > Geral > Apps da Web</p>
                </div>

                <div>
                  <label className="block text-sm font-semibold text-gray-700 mb-1 flex items-center gap-2">
                    <Sparkles size={14}/> Gemini API Key (Opcional)
                  </label>
                  <input 
                    type="text" 
                    value={apiKey}
                    onChange={e => setApiKey(e.target.value)}
                    className="w-full p-3 border rounded-lg text-sm bg-gray-50 focus:ring-2 focus:ring-blue-500 outline-none"
                    placeholder="AIzaSy..."
                  />
                  <p className="text-xs text-gray-400 mt-1">Para Inteligência Artificial (Google AI Studio)</p>
                </div>

                <button onClick={handleSave} className="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-xl transition-all mt-4 shadow-lg hover:shadow-blue-500/30">
                  Salvar e Iniciar
                </button>
              </div>
            </div>
          </div>
        );
      }

      // --- APP LOGIC ---

      const App = () => {
        // State
        const [config, setConfig] = useState(null);
        const [db, setDb] = useState(null);
        const [activeTab, setActiveTab] = useState('dashboard');
        const [sidebarOpen, setSidebarOpen] = useState(false);
        const [scannerOpen, setScannerOpen] = useState(false);
        
        // Data
        const [students, setStudents] = useState([]);
        const [attendance, setAttendance] = useState([]);
        
        // AI
        const [aiLoading, setAiLoading] = useState(false);
        const [aiResult, setAiResult] = useState('');

        // Init
        useEffect(() => {
          const stored = localStorage.getItem(CONFIG_KEY);
          if (stored) {
            const parsed = JSON.parse(stored);
            setConfig(parsed);
            const firebaseApp = initializeApp(parsed.firebase);
            const firestore = getFirestore(firebaseApp);
            setDb(firestore);

            // Realtime Listeners
            const unsubStudents = onSnapshot(collection(firestore, 'alunos'), (snap) => {
              setStudents(snap.docs.map(d => ({ id: d.id, ...d.data() })));
            });

            const unsubAttendance = onSnapshot(query(collection(firestore, 'presencas'), orderBy('timestamp', 'desc')), (snap) => {
              setAttendance(snap.docs.map(d => ({ id: d.id, ...d.data() })));
            });

            return () => { unsubStudents(); unsubAttendance(); };
          }
        }, []);

        // Actions
        const handleAddStudent = async (data) => {
          if (!db) return;
          await addDoc(collection(db, 'alunos'), {
            ...data,
            createdAt: serverTimestamp(),
            // ID Virtual para QR Code (simulando um crachá fixo)
            qrCodeValue: Math.random().toString(36).substr(2, 9)
          });
        };

        const handleDeleteStudent = async (id) => {
          if(!db || !confirm("Tem certeza?")) return;
          await deleteDoc(doc(db, 'alunos', id));
        };

        const handleMarkAttendance = async (studentId) => {
          if (!db) return;
          const student = students.find(s => s.id === studentId || s.qrCodeValue === studentId);
          if (!student) throw new Error("Aluno não encontrado!");

          const today = new Date().toISOString().split('T')[0];
          
          // Check duplicate localmente (para feedback rápido, Firestore rules devem garantir no backend)
          const already = attendance.find(a => a.studentId === student.id && a.dateString === today);
          if (already) throw new Error(`${student.name} já registrado hoje!`);

          await addDoc(collection(db, 'presencas'), {
            studentId: student.id,
            studentName: student.name,
            pastoral: student.pastoral,
            timestamp: Date.now(),
            dateString: today
          });
          
          return student.name;
        };

        const handleAiAnalysis = async () => {
            if (!config?.geminiKey) return alert("Configure a API Key do Gemini nas configurações.");
            setAiLoading(true);
            try {
                const ai = new GoogleGenAI({ apiKey: config.geminiKey });
                const prompt = `Analise estes dados de paróquia: Total Alunos: ${students.length}. Presenças hoje: ${attendance.filter(a => a.dateString === new Date().toISOString().split('T')[0]).length}. Histórico recente: ${JSON.stringify(attendance.slice(0, 50))}. Dê 3 insights curtos e motivacionais com emojis.`;
                
                const response = await ai.models.generateContent({
                    model: 'gemini-2.5-flash',
                    contents: prompt
                });
                setAiResult(response.text);
            } catch (err) {
                console.error(err);
                setAiResult("Erro ao consultar a IA. Verifique a chave.");
            }
            setAiLoading(false);
        };

        const handleLogout = () => {
            if(confirm("Isso desconectará o banco de dados. Deseja continuar?")) {
                localStorage.removeItem(CONFIG_KEY);
                window.location.reload();
            }
        };

        // Render Checking
        if (!config) return <SetupScreen />;
        if (!db) return <div className="h-screen flex items-center justify-center">Carregando Firebase...</div>;

        // --- SUB-COMPONENTS RENDER ---

        const Dashboard = () => {
            const today = new Date().toISOString().split('T')[0];
            const presentToday = attendance.filter(a => a.dateString === today).length;
            const chartData = useMemo(() => {
                const days = [];
                for(let i=6; i>=0; i--) {
                    const d = new Date(); d.setDate(d.getDate() - i);
                    const ds = d.toISOString().split('T')[0];
                    days.push({
                        name: d.toLocaleDateString('pt-BR', {weekday: 'short'}),
                        value: attendance.filter(a => a.dateString === ds).length
                    });
                }
                return days;
            }, [attendance]);

            return (
                <div className="space-y-6 animate-in">
                    <h2 className="text-2xl font-bold text-gray-800">Visão Geral</h2>
                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div className="bg-white p-5 rounded-xl shadow-sm border border-blue-100">
                            <p className="text-gray-500 text-sm">Total Alunos</p>
                            <h3 className="text-3xl font-bold text-blue-600">{students.length}</h3>
                        </div>
                        <div className="bg-white p-5 rounded-xl shadow-sm border border-green-100">
                            <p className="text-gray-500 text-sm">Presentes Hoje</p>
                            <h3 className="text-3xl font-bold text-green-600">{presentToday}</h3>
                        </div>
                        <div className="bg-white p-5 rounded-xl shadow-sm border border-red-100">
                            <p className="text-gray-500 text-sm">Faltantes</p>
                            <h3 className="text-3xl font-bold text-red-600">{students.length - presentToday}</h3>
                        </div>
                        <div className="bg-white p-5 rounded-xl shadow-sm border border-purple-100">
                            <p className="text-gray-500 text-sm">Engajamento</p>
                            <h3 className="text-3xl font-bold text-purple-600">{students.length ? Math.round((presentToday/students.length)*100) : 0}%</h3>
                        </div>
                    </div>
                    <div className="bg-white p-6 rounded-xl shadow-sm border h-80">
                        <h3 className="font-bold mb-4 text-gray-700">Frequência Semanal</h3>
                        <ResponsiveContainer width="100%" height="100%">
                            <BarChart data={chartData}>
                                <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="#e5e7eb"/>
                                <XAxis dataKey="name" axisLine={false} tickLine={false} tick={{fill: '#6b7280'}}/>
                                <Tooltip cursor={{fill: '#f3f4f6'}} contentStyle={{borderRadius: '8px', border:'none'}}/>
                                <Bar dataKey="value" fill="#3b82f6" radius={[4,4,0,0]} barSize={30}/>
                            </BarChart>
                        </ResponsiveContainer>
                    </div>
                </div>
            );
        };

        const StudentsList = () => {
            const [modal, setModal] = useState(false);
            const [form, setForm] = useState({ name: '', pastoral: PastoralType.CATEQUESE });
            const [search, setSearch] = useState('');

            const filtered = students.filter(s => s.name.toLowerCase().includes(search.toLowerCase()));

            return (
                <div className="space-y-6 animate-in">
                    <div className="flex justify-between items-center">
                        <h2 className="text-2xl font-bold text-gray-800">Alunos</h2>
                        <button onClick={() => setModal(true)} className="bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-blue-700 transition">
                            <Plus size={18}/> Novo
                        </button>
                    </div>

                    <div className="bg-white rounded-xl shadow-sm border overflow-hidden">
                        <div className="p-4 border-b">
                            <div className="relative">
                                <Search className="absolute left-3 top-3 text-gray-400" size={18}/>
                                <input type="text" placeholder="Buscar..." value={search} onChange={e=>setSearch(e.target.value)} className="w-full pl-10 p-2 border rounded-lg bg-gray-50"/>
                            </div>
                        </div>
                        <div className="overflow-x-auto">
                            <table className="w-full text-left">
                                <thead className="bg-gray-50 text-gray-600 text-sm">
                                    <tr><th className="p-4">Nome</th><th className="p-4">Pastoral</th><th className="p-4 text-right">Ações</th></tr>
                                </thead>
                                <tbody className="divide-y">
                                    {filtered.map(s => (
                                        <tr key={s.id} className="hover:bg-gray-50">
                                            <td className="p-4 font-medium">{s.name}</td>
                                            <td className="p-4 text-sm text-gray-500"><span className="bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs font-semibold">{s.pastoral}</span></td>
                                            <td className="p-4 text-right">
                                                <button onClick={() => handleDeleteStudent(s.id)} className="text-red-400 hover:text-red-600 hover:bg-red-50 p-2 rounded"><Trash2 size={18}/></button>
                                            </td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>
                    </div>

                    {modal && (
                        <div className="fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
                            <div className="bg-white rounded-xl p-6 w-full max-w-md animate-in">
                                <h3 className="font-bold text-xl mb-4">Novo Aluno</h3>
                                <div className="space-y-4">
                                    <input className="w-full p-2 border rounded" placeholder="Nome Completo" value={form.name} onChange={e => setForm({...form, name: e.target.value})} />
                                    <select className="w-full p-2 border rounded bg-white" value={form.pastoral} onChange={e => setForm({...form, pastoral: e.target.value})}>
                                        {Object.values(PastoralType).map(p => <option key={p} value={p}>{p}</option>)}
                                    </select>
                                    <div className="flex justify-end gap-2 mt-4">
                                        <button onClick={() => setModal(false)} className="px-4 py-2 text-gray-500">Cancelar</button>
                                        <button onClick={() => { handleAddStudent(form); setModal(false); setForm({name:'', pastoral: PastoralType.CATEQUESE}) }} className="px-4 py-2 bg-blue-600 text-white rounded">Salvar</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const Reports = () => {
             const [date, setDate] = useState(new Date().toISOString().split('T')[0]);
             const list = useMemo(() => {
                 return students.map(s => ({
                     ...s,
                     present: attendance.some(a => a.studentId === s.id && a.dateString === date)
                 }));
             }, [students, attendance, date]);

             const exportCsv = () => {
                 const csv = "data:text/csv;charset=utf-8," + ["Nome,Pastoral,Status", ...list.map(l => `${l.name},${l.pastoral},${l.present ? 'PRESENTE' : 'FALTA'}`)].join('\n');
                 const link = document.createElement("a"); link.href = encodeURI(csv); link.download = `relatorio_${date}.csv`; link.click();
             };

             return (
                <div className="space-y-6 animate-in">
                    <div className="flex justify-between items-center">
                        <h2 className="text-2xl font-bold text-gray-800">Relatório Diário</h2>
                        <button onClick={exportCsv} className="bg-green-600 text-white px-4 py-2 rounded-lg flex gap-2 hover:bg-green-700"><Download size={18}/> Exportar</button>
                    </div>
                    <div className="bg-white p-4 rounded-xl border flex gap-4 items-center">
                        <Calendar className="text-gray-400"/>
                        <input type="date" value={date} onChange={e => setDate(e.target.value)} className="outline-none text-gray-700 font-medium"/>
                    </div>
                    <div className="bg-white rounded-xl shadow-sm border overflow-hidden">
                        <table className="w-full text-left">
                            <thead className="bg-gray-50 text-gray-600 text-sm"><tr><th className="p-4">Aluno</th><th className="p-4">Status</th></tr></thead>
                            <tbody className="divide-y">
                                {list.map(l => (
                                    <tr key={l.id}>
                                        <td className="p-4">{l.name}</td>
                                        <td className="p-4">
                                            {l.present 
                                                ? <span className="text-green-600 flex items-center gap-1 text-sm font-bold"><Check size={14}/> Presente</span> 
                                                : <span className="text-red-400 flex items-center gap-1 text-sm"><XIcon size={14}/> Falta</span>
                                            }
                                        </td>
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                </div>
             );
        };

        const ScannerModal = ({ onClose }) => {
            const [val, setVal] = useState('');
            const [status, setStatus] = useState('idle');
            const [msg, setMsg] = useState('');

            useEffect(() => document.getElementById('scanInput')?.focus(), []);

            const submit = async (e) => {
                e.preventDefault();
                if(!val) return;
                try {
                    const name = await handleMarkAttendance(val);
                    setStatus('success');
                    setMsg(name);
                    setTimeout(() => { setStatus('idle'); setVal(''); setMsg(''); onClose(); }, 1500);
                } catch (err) {
                    setStatus('error');
                    setMsg(err.message);
                }
            };

            return (
                <div className="fixed inset-0 bg-black/90 z-50 flex flex-col items-center justify-center p-4">
                    <button onClick={onClose} className="absolute top-4 right-4 text-white p-2 bg-white/10 rounded-full"><X size={24}/></button>
                    <div className="bg-white p-8 rounded-2xl w-full max-w-sm text-center animate-in">
                        <div className={`mx-auto w-16 h-16 rounded-full flex items-center justify-center mb-4 ${status === 'success' ? 'bg-green-100 text-green-600' : status === 'error' ? 'bg-red-100 text-red-600' : 'bg-blue-100 text-blue-600'}`}>
                            {status === 'success' ? <CheckCircle size={32}/> : status === 'error' ? <AlertTriangle size={32}/> : <Scan size={32}/>}
                        </div>
                        <h2 className="text-xl font-bold mb-2">Registrar Presença</h2>
                        <form onSubmit={submit}>
                            <input id="scanInput" value={val} onChange={e => setVal(e.target.value)} className="w-full border-2 border-gray-300 rounded-xl p-3 text-center text-lg mb-4 focus:border-blue-500 outline-none" placeholder="Escaneie ou digite ID..." autoComplete="off"/>
                            <button className="w-full bg-blue-600 text-white py-3 rounded-xl font-bold">Confirmar</button>
                        </form>
                        {msg && <p className={`mt-4 font-medium ${status === 'success' ? 'text-green-600' : 'text-red-600'}`}>{msg}</p>}
                    </div>
                </div>
            );
        };

        // --- MAIN LAYOUT ---

        return (
          <div className="flex min-h-screen bg-gray-50 text-gray-900 font-sans">
            {/* Sidebar Mobile Overlay */}
            {sidebarOpen && <div className="fixed inset-0 bg-black/50 z-30 md:hidden" onClick={() => setSidebarOpen(false)}/>}
            
            {/* Sidebar */}
            <aside className={`fixed md:static inset-y-0 left-0 z-40 w-64 bg-slate-900 text-white transition-transform ${sidebarOpen ? 'translate-x-0' : '-translate-x-full'} md:translate-x-0 flex flex-col`}>
                <div className="h-16 flex items-center px-6 border-b border-slate-800 font-bold text-lg tracking-wide">PastoralPass <span className="text-blue-400 ml-1">Cloud</span></div>
                <nav className="flex-1 p-4 space-y-2">
                    {[
                        {id: 'dashboard', icon: Home, label: 'Painel'},
                        {id: 'students', icon: Users, label: 'Alunos'},
                        {id: 'reports', icon: ClipboardList, label: 'Relatórios'},
                        {id: 'insights', icon: Sparkles, label: 'IA Insights'},
                        {id: 'settings', icon: Settings, label: 'Configuração'},
                    ].map(i => (
                        <button key={i.id} onClick={() => {setActiveTab(i.id); setSidebarOpen(false)}} className={`w-full flex items-center gap-3 p-3 rounded-lg transition ${activeTab === i.id ? 'bg-blue-600 text-white shadow-lg shadow-blue-900/50' : 'text-slate-400 hover:bg-slate-800 hover:text-white'}`}>
                            <i.icon size={20}/> {i.label}
                        </button>
                    ))}
                </nav>
            </aside>

            {/* Content */}
            <main className="flex-1 flex flex-col h-screen overflow-hidden">
                <header className="h-16 bg-white border-b flex items-center px-4 justify-between md:hidden">
                    <button onClick={() => setSidebarOpen(true)} className="p-2 text-gray-600"><Database size={24}/></button>
                    <span className="font-bold text-slate-800">PastoralPass</span>
                    <div className="w-8"></div>
                </header>

                <div className="flex-1 overflow-auto p-4 md:p-8 pb-24">
                    <div className="max-w-6xl mx-auto">
                        {activeTab === 'dashboard' && <Dashboard />}
                        {activeTab === 'students' && <StudentsList />}
                        {activeTab === 'reports' && <Reports />}
                        {activeTab === 'insights' && (
                            <div className="bg-gradient-to-r from-violet-600 to-indigo-600 text-white p-8 rounded-2xl shadow-xl animate-in">
                                <h2 className="text-2xl font-bold flex gap-2 items-center mb-4"><Sparkles className="text-yellow-300"/> Inteligência Pastoral</h2>
                                <p className="mb-6 opacity-90">Use a IA para analisar o crescimento da sua comunidade.</p>
                                <button onClick={handleAiAnalysis} disabled={aiLoading} className="bg-white text-indigo-700 px-6 py-3 rounded-xl font-bold hover:shadow-lg transition disabled:opacity-70">
                                    {aiLoading ? 'Analisando...' : 'Gerar Relatório'}
                                </button>
                                {aiResult && <div className="mt-6 bg-white/10 p-6 rounded-xl border border-white/20 leading-relaxed">{aiResult}</div>}
                            </div>
                        )}
                        {activeTab === 'settings' && (
                            <div className="bg-white p-6 rounded-xl border shadow-sm animate-in">
                                <h2 className="text-xl font-bold mb-4 text-red-600">Zona de Perigo</h2>
                                <p className="text-gray-600 mb-4">Deseja desconectar deste banco de dados Firebase?</p>
                                <button onClick={handleLogout} className="border border-red-200 text-red-600 px-4 py-2 rounded-lg hover:bg-red-50 font-medium">Desconectar Banco de Dados</button>
                            </div>
                        )}
                    </div>
                </div>

                {/* FAB Scanner */}
                <button onClick={() => setScannerOpen(true)} className="fixed bottom-6 right-6 bg-blue-600 text-white p-4 rounded-full shadow-xl shadow-blue-600/40 hover:scale-105 transition active:scale-95 z-30">
                    <ScanLine size={28}/>
                </button>
            </main>

            {scannerOpen && <ScannerModal onClose={() => setScannerOpen(false)} />}
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App />);
    </script>
  </body>
</html>
